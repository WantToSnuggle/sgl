## SGL (Small Graphics Library)

### Registering the underlying drawing interface (mandatory)
Like most GUI libraries, before using the SGL library, please register the underlying drawing interface. The registration of the underlying interface is as follows:
```c

void panel_flush_area(int16_t x, int16_t y, int16_t w, int16_t h, sgl_color_t *src)
{
    tft_set_win(x, y, x + w - 1, y + h - 1);
	GPIO_WriteBit(SPI_DC_PORT, SPI_DC_PIN, 1);
	SPI1_WriteMultByte((uint8_t*)src, w * h * 2);
}

...
sgl_device_fb_t fb_dev = {
    .xres = CONFIG_SGL_PANEL_WIDTH,
    .yres = CONFIG_SGL_PANEL_HEIGHT,
    .xres_virtual = CONFIG_SGL_PANEL_WIDTH,
    .yres_virtual = CONFIG_SGL_PANEL_HEIGHT,
    .flush_area = panel_flush_area,
    .framebuffer = panel_buffer,
    .framebuffer_size = SGL_ARRAY_SIZE(panel_buffer) * sizeof(sgl_color_t), 
};

sgl_device_fb_register(&fb_dev);
...
```
In the above process, an `sgl_device_fb_t` structure is defined and some main parameters are initialized. The meaning of the parameters is as follows:
- `xres`: Screen width
- `yres`: Screen height
- `xres_virtual`: Virtual screen width
- `yres_virtual`: Virtual screen height
- `flush_area`: Area refresh function, used to refresh the specified area
- `framebuffer`: Frame buffer pointer, pointing to the frame buffer address
- `framebuffer_size`: Frame buffer size

The `sgl_device_fb_register` function is used to register the frame buffer device, with the parameter being a pointer to the `sgl_device_fb_t` structure.

### Registering debug interface (optional)
Use the `void sgl_device_log_register(void (*log_puts)(const char *str))` function to register the debug interface. The parameter is a pointer to the `log_puts` function, for example, the following code:
```c
void uart_put_string(const char *str) {
   /* Send UART data */
}

...
sgl_device_log_register(uart_put_string);
...

```

### Calling the sgl_init() function
First, include the `sgl.h` header file, then call the `sgl_init()` function to initialize the `SGL` library, including memory initialization, `SGL` data structure initialization, etc. Then you can start creating widgets and drawing graphics, for example, the following code:
```c
#include <sgl.h>

int main(void)
{
    sgl_device_fb_register(&fb_dev);
    sgl_device_log_register(uart_put_string);
    sgl_init();

    /* Create widgets */

    while(1) {
        sgl_task_handle();
    };

    return 0;
}
```

### Registering mouse events (or touch click events)
In the interrupt service function of mouse click events or touch click events, call the `sgl_event_send_pos()` function. This function will handle mouse click events or touch click events. The parameters are the mouse click event coordinates and the type of touch click event, for example, the following code:
```c
/* Include header file */
#include <sgl.h>
...
static void mouse_event_interrupt(xxxxx) 
{
    sgl_event_t evt;

    if(判断按下) {
        evt.pos.x = event->motion.x;
        evt.pos.y = event->motion.y;
        evt.type = SGL_EVENT_PRESSED;
        sgl_event_send_pos(evt.pos, evt.type);
    }
    else if(判断释放) {
        evt.pos.x = event->motion.x;
        evt.pos.y = event->motion.y;
        evt.type = SGL_EVENT_RELEASED;
        sgl_event_send_pos(evt.pos, evt.type);
    }
}
```


### Creating widgets
Use the following code to create a widget:
```c
sgl_obj_t *button = sgl_button_create(NULL);
sgl_obj_set_pos(button, 100, 300);
sgl_obj_set_size(button, 200, 100);
sgl_obj_set_font(button, &song23);
sgl_obj_set_radius(button, 60);
sgl_obj_set_border_width(button, 0);
sgl_obj_set_style(button, SGL_STYLE_TEXT_COLOR, 0x5de);
sgl_obj_set_style(button, SGL_STYLE_TEXT ,SGL_TEXT("Click me!"));
```